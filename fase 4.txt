function startPhase4() {
    // Mantener el fondo actual (rojo)
    gameScreen.style.display = "none";
    questionContainer.innerHTML = "";
    scoreElement.style.display = "none";

    const phase4Container = document.createElement("div");
    phase4Container.id = "phase4Container";
    phase4Container.style.position = "absolute";
    phase4Container.style.top = "50%";
    phase4Container.style.left = "50%";
    phase4Container.style.transform = "translate(-50%, -50%)";
    phase4Container.style.display = "flex";
    phase4Container.style.flexDirection = "column";
    phase4Container.style.alignItems = "center";
    phase4Container.style.gap = "20px";
    document.body.appendChild(phase4Container);

    const messages = [
        "Bajale volumen",
        "Feliz cumplea침os",
        "Te dedico esta canci칩n"
    ];

    const popSound = new Audio("sounds/pop.mp3");
    const audios = [];

    function createAudioMessage(index) {
        const audioWrapper = document.createElement("div");
        audioWrapper.style.background = "#DCF8C6";
        audioWrapper.style.padding = "15px 20px";
        audioWrapper.style.borderRadius = "20px";
        audioWrapper.style.width = "250px";
        audioWrapper.style.display = "flex";
        audioWrapper.style.flexDirection = "column";
        audioWrapper.style.alignItems = "center";
        audioWrapper.style.position = "relative"; // necesario para corazones
        audioWrapper.style.overflow = "hidden";
        audioWrapper.style.opacity = 0;
        audioWrapper.style.transform = "translateY(30px) scale(0.9)";
        audioWrapper.style.transition = "all 0.6s cubic-bezier(0.68, -0.55, 0.27, 1.55)";
        audioWrapper.classList.add("audio-wrapper");

        // Corazones flotantes
        function createHeart() {
            const heart = document.createElement("div");
            heart.textContent = "游눘"; // coraz칩n
            heart.style.position = "absolute";
            heart.style.fontSize = `${Math.random()*18 + 12}px`;
            heart.style.bottom = "-10px";
            heart.style.left = `${Math.random() * 90}%`;
            heart.style.opacity = Math.random() * 0.8 + 0.2;
            heart.style.pointerEvents = "none";
            heart.style.animation = `floatHeart ${3 + Math.random()*2}s ease-out forwards`;
            audioWrapper.appendChild(heart);
            setTimeout(() => heart.remove(), 5000);
        }

        setInterval(createHeart, 800);

        const msg = document.createElement("p");
        msg.textContent = messages[index];
        msg.style.color = "#333";
        msg.style.marginBottom = "10px";
        msg.style.textAlign = "center";
        audioWrapper.appendChild(msg);

        const audio = document.createElement("audio");
        audio.controls = true;
        audio.src = `audi/audio${index+1}.mp3`;
        audio.style.width = "100%";
        audio.style.borderRadius = "10px";
        audio.classList.add("pulse-play-btn");
        audioWrapper.appendChild(audio);

        audios.push(audio);

        audio.addEventListener("play", () => {
            audios.forEach(a => {
                if (a !== audio) {
                    a.pause();
                    a.parentElement.style.boxShadow = "none";
                    a.style.filter = "none";
                }
            });
            audioWrapper.style.transform = "scale(1.05)";
            audioWrapper.style.boxShadow = "0 0 15px 5px rgba(255,255,255,0.6)";
            audio.style.filter = "hue-rotate(90deg) brightness(1.3)";
            audio.classList.remove("pulse-play-btn");
        });

        audio.addEventListener("pause", () => {
            audioWrapper.style.transform = "scale(1)";
            audioWrapper.style.boxShadow = "none";
            audio.style.filter = "none";
            audio.classList.add("pulse-play-btn");
        });

        audio.addEventListener("ended", () => {
            audioWrapper.style.transform = "scale(1)";
            audioWrapper.style.boxShadow = "none";
            audio.style.filter = "none";
            audio.classList.add("pulse-play-btn");
        });

        phase4Container.appendChild(audioWrapper);

        setTimeout(() => {
            audioWrapper.style.opacity = 1;
            audioWrapper.style.transform = "translateY(0) scale(1)";
            popSound.currentTime = 0;
            popSound.play();
        }, index * 1600);
    }

    messages.forEach((msg, i) => {
        createAudioMessage(i);
    });

    setTimeout(() => {
        const finalMsg = document.createElement("p");
        finalMsg.textContent = "Hoy ser치 un d칤a interesante, prep치rate 游눘";
        finalMsg.style.color = "white";
        finalMsg.style.fontSize = "1.2rem";
        finalMsg.style.marginTop = "20px";
        finalMsg.style.textAlign = "center";
        phase4Container.appendChild(finalMsg);
    }, messages.length * 1600 + 200);
}
